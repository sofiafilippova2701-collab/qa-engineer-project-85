---
- summary: |
    Проверка успешного входа с корректными учётными данными
  requirement: |
    При верном вводе логина и пароля пользователь должен войти в систему и быть перенаправлен на главную страницу
  prerequisites: |
    Пользователь зарегистрирован в системе
    Открыта страница авторизации
  test-data: |
    Логин = testuser
    Пароль = correctpassword123
  steps:
    - На странице авторизации в поле «Логин» ввести значение из test-data
    - В поле «Пароль» ввести значение из test-data
    - Нажать кнопку «Войти»
  expected-result: |
    Пользователь перенаправляется на главную страницу
    В шапке отображается приветствие с именем пользователя
    Сессия создана и активна


- summary: |
    Невозможность входа с несуществующим логином
  requirement: |
    При вводе несуществующего логина система должна отобразить сообщение об ошибке
  prerequisites: |
    Открыта страница авторизации
  test-data: |
    Логин = nonexistent
    Пароль = anypassword
  steps:
    - На странице авторизации в поле «Логин» ввести значение из test-data
    - В поле «Пароль» ввести произвольный пароль
    - Нажать кнопку «Войти»
  expected-result: |
    Пользователь остаётся на странице авторизации
    Отображается сообщение: «Пользователь не найден»
    Поле «Логин» подсвечивается красным


- summary: |
    Невозможность входа с неверным паролем
  requirement: |
    При неверном пароле система должна отобразить сообщение об ошибке
  prerequisites: |
    Открыта страница авторизации
    Логин существует в системе
  test-data: |
    Логин = existinguser
    Пароль = wrongpassword
  steps:
    - На странице авторизации в поле «Логин» ввести существующий логин
    - В поле «Пароль» ввести неверный пароль из test-data
    - Нажать кнопку «Войти»
  expected-result: |
    Пользователь остаётся на странице авторизации
    Отображается сообщение: «Неверный пароль»
    Поле «Пароль» подсвечивается красным


- summary: |
    Переход на страницу регистрации с главной страницы
  requirement: |
    Пользователь может перейти на страницу регистрации через главную страницу
  prerequisites: |
    Открыта главная страница сайта
  test-data: |
    (не требуются)
  steps:
    - Найти и нажать ссылку/кнопку «Регистрация» на главной странице
  expected-result: |
    Происходит переход на страницу регистрации
    Отображаются поля: «Логин», «Email», «Пароль», «Повторить пароль»
    Присутствует кнопка «Зарегистрироваться»


- summary: |
    Начало соревнования в реальном времени между двумя пользователями
  requirement: |
    Два авторизованных пользователя могут начать соревнование и видеть процесс написания кода друг друга
  prerequisites: |
    Два пользователя авторизованы в разных браузерах/устройствах
    Оба находятся на главной странице
  test-data: |
    Задача = FizzBuzz
  steps:
    - Первый пользователь нажимает кнопку «Играть с соперником»
    - Система ищет соперника и соединяет двух пользователей
    - Оба пользователя видят одну и ту же задачу
    - Один из пользователей начинает вводить код
  expected-result: |
    Второй пользователь видит ввод кода в реальном времени с задержкой ≤ 500 мс
    Статус игры: «Идет соревнование»
    Оба могут редактировать свой код независимо


- summary: |
    Игра с ботом на лёгком уровне сложности
  requirement: |
    Пользователь может сыграть с ботом, выбрав уровень сложности
  prerequisites: |
    Пользователь авторизован
    Находится на главной странице
  test-data: |
    Уровень сложности = Лёгкий
  steps:
    - Пользователь нажимает кнопку «Играть с ботом»
    - Выбирает уровень сложности «Лёгкий»
    - Начинает писать код
  expected-result: |
    Пользователь получает задачу
    Бот начинает «писать» код в своём окне
    Код бота появляется с реалистичной задержкой
    По завершении проверки отображаются результаты


- summary: |
    Приглашение друга по ссылке для приватной игры
  requirement: |
    Пользователь может создать приватную игру и пригласить друга по ссылке
  prerequisites: |
    Пользователь авторизован
    Находится на главной странице
  test-data: |
    Ссылка = https://codebattle.hexlet.io/games/invite/abc123
  steps:
    - Пользователь нажимает «Играть с другом»
    - Копирует сгенерированную ссылку
    - Открывает ссылку в другом браузере или передаёт другу
    - Второй пользователь переходит по ссылке и присоединяется
  expected-result: |
    Второй пользователь успешно подключается к игре
    Оба видят интерфейс соревнования
    Игра начинается автоматически после подключения



- summary: |
    Отображение персонального рейтинга пользователя
  requirement: |
    Результаты игр сохраняются, формируется персональный рейтинг
  prerequisites: |
    Пользователь сыграл не менее одной игры
    Авторизован
  test-data: |
    Количество игр = 1
    Результат = Победа
  steps:
    - Пользователь переходит на страницу «Рейтинг»
  expected-result: |
    Отображается таблица с пользователями
    Пользователь видит себя в списке
    Его количество побед и уровень отражают последнюю игру


- summary: |
    Адаптивность интерфейса на мобильном устройстве
  requirement: |
    Сайт должен быть удобен в использовании на мобильных устройствах
  prerequisites: |
    Открыта страница сайта на мобильном устройстве или в мобильном режиме браузера
  test-data: |
    Устройство = смартфон (разрешение 375x812)
  steps:
    - Открыть главную страницу в мобильном браузере
    - Прокрутить страницу вниз
    - Нажать кнопку «Играть»
  expected-result: |
    Элементы интерфейса отображаются корректно, без наложений
    Кнопки удобно нажимать пальцем
    Текст читаем без масштабирования
    Верстка не ломается при повороте экрана


- summary: |
    Определение победителя при корректном решении задачи
  requirement: |
    Система должна проверить корректность решения и определить победителя
  prerequisites: |
    Два пользователя начали игру
  test-data: |
    Задача = Reverse String
    Код первого пользователя = правильный
    Код второго пользователя = с ошибкой
  steps:
    - Оба пользователя отправляют решение
  expected-result: |
    Система запускает тесты для каждого решения
    Пользователь с правильным решением объявляется победителем
    Проигравшему показываются тесты, которые не прошли
    Игра завершается, результаты сохраняются

- summary: |
    Завершение игры по истечении таймера
  requirement: |
    Если время на решение задачи истекло, игра завершается автоматически
  prerequisites: |
    Пользователь начал игру
    Таймер установлен на 5 минут
  steps:
    - Дождаться истечения таймера
  expected-result: |
    Игра автоматически завершается
    Отображается сообщение: «Время вышло»
    Результаты сохраняются в рейтинге


- summary: |
    Возможность сдаться во время игры
  requirement: |
    Пользователь может досрочно завершить игру, нажав «Сдаться»
  prerequisites: |
    Пользователь находится в активной игре
  test-data: |
    (не требуются)
  steps:
    - Нажать кнопку «Сдаться»
  expected-result: |
    Игра завершается
    Отображается сообщение: «Вы сдались»
    Результат сохраняется в рейтинге как поражение
